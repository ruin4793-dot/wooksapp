<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MusicMate - 당신의 취향을 분석해 완벽한 음악을 추천해드립니다. 좋아하는 장르, 아티스트, 노래를 입력하고 맞춤 추천을 받아보세요.">
    <title>MusicMate - 나만의 음악 추천</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Background Animation -->
    <div class="bg-animation">
        <div class="bg-gradient"></div>
        <div class="floating-notes">
            <span class="note">♪</span>
            <span class="note">♫</span>
            <span class="note">♬</span>
            <span class="note">♩</span>
            <span class="note">♪</span>
            <span class="note">♫</span>
        </div>
    </div>

    <!-- Header -->
    <header class="header glass">
        <div class="header-content">
            <div class="logo">
                <span class="logo-icon">🎵</span>
                <h1>MusicMate</h1>
            </div>
            <div class="user-area" id="user-area">
                <!-- User info or login button will appear here -->
                <button class="btn btn-primary btn-small" id="login-btn">
                    <span class="btn-icon-sm">👤</span>
                    <span>로그인</span>
                </button>
            </div>
        </div>
        <p class="tagline">당신의 취향을 분석해 완벽한 음악을 추천해드립니다</p>
    </header>

    <!-- Main Content -->
    <main class="container" id="main-content">
        <!-- Input Section -->
        <section class="input-section">
            <!-- Genre Selection -->
            <div class="card glass" id="genre-card">
                <div class="card-header">
                    <span class="card-icon">🎸</span>
                    <h2>장르 선택</h2>
                </div>
                <div class="genre-grid" id="genre-grid">
                    <!-- Genres will be populated by JS -->
                </div>
            </div>

            <!-- Artist Input -->
            <div class="card glass" id="artist-card">
                <div class="card-header">
                    <span class="card-icon">🎤</span>
                    <h2>좋아하는 아티스트</h2>
                </div>
                <div class="input-group">
                    <input type="text" id="artist-input" class="glass-input" placeholder="아티스트 이름을 입력하세요">
                    <button class="btn btn-primary" id="add-artist-btn">추가</button>
                </div>
            </div>

            <!-- Song Input -->
            <div class="card glass" id="song-card">
                <div class="card-header">
                    <span class="card-icon">🎶</span>
                    <h2>좋아하는 노래</h2>
                </div>
                <div class="input-group">
                    <input type="text" id="song-input" class="glass-input" placeholder="노래 제목 (아티스트 - 제목)">
                    <button class="btn btn-primary" id="add-song-btn">추가</button>
                </div>
            </div>
        </section>

        <!-- My Preferences Section -->
        <section class="preferences-section">
            <div class="card glass large-card" id="preferences-card">
                <div class="card-header">
                    <span class="card-icon">💜</span>
                    <h2>내 취향 목록</h2>
                    <button class="btn btn-secondary btn-small" id="clear-all-btn">전체 삭제</button>
                </div>

                <div class="preferences-tabs">
                    <button class="tab-btn active" data-tab="genres">장르</button>
                    <button class="tab-btn" data-tab="artists">아티스트</button>
                    <button class="tab-btn" data-tab="songs">노래</button>
                </div>

                <div class="preferences-content">
                    <div class="tab-content active" id="genres-tab">
                        <div class="tag-list" id="selected-genres">
                            <!-- Selected genres will appear here -->
                        </div>
                        <p class="empty-message" id="genres-empty">아직 선택한 장르가 없습니다</p>
                    </div>
                    <div class="tab-content" id="artists-tab">
                        <div class="tag-list" id="selected-artists">
                            <!-- Selected artists will appear here -->
                        </div>
                        <p class="empty-message" id="artists-empty">아직 추가한 아티스트가 없습니다</p>
                    </div>
                    <div class="tab-content" id="songs-tab">
                        <div class="tag-list" id="selected-songs">
                            <!-- Selected songs will appear here -->
                        </div>
                        <p class="empty-message" id="songs-empty">아직 추가한 노래가 없습니다</p>
                    </div>
                </div>

                <button class="btn btn-accent btn-large" id="get-recommendations-btn">
                    <span class="btn-icon-sm">✨</span>
                    <span>추천 받기</span>
                </button>
            </div>
        </section>

        <!-- Recommendations Section -->
        <section class="recommendations-section" id="recommendations-section">
            <div class="card glass large-card" id="recommendations-card">
                <div class="card-header">
                    <span class="card-icon">🌟</span>
                    <h2>추천 결과</h2>
                    <button class="btn btn-secondary btn-small" id="refresh-recommendations-btn">새로고침</button>
                </div>

                <div class="recommendations-tabs">
                    <button class="rec-tab-btn active" data-rec-tab="rec-artists">추천 아티스트</button>
                    <button class="rec-tab-btn" data-rec-tab="rec-songs">추천 노래</button>
                </div>

                <div class="recommendations-content">
                    <div class="rec-tab-content active" id="rec-artists-tab">
                        <div class="recommendations-grid" id="recommended-artists">
                            <!-- Recommended artists will appear here -->
                        </div>
                        <p class="empty-message" id="rec-artists-empty">먼저 취향을 입력하고 추천받기를 눌러주세요</p>
                    </div>
                    <div class="rec-tab-content" id="rec-songs-tab">
                        <div class="recommendations-grid" id="recommended-songs">
                            <!-- Recommended songs will appear here -->
                        </div>
                        <p class="empty-message" id="rec-songs-empty">먼저 취향을 입력하고 추천받기를 눌러주세요</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rating History Section -->
        <section class="history-section" id="history-section">
            <div class="card glass large-card" id="history-card">
                <div class="card-header">
                    <span class="card-icon">📊</span>
                    <h2>평가 기록</h2>
                </div>
                <div class="history-list" id="rating-history">
                    <!-- Rating history will appear here -->
                </div>
                <p class="empty-message" id="history-empty">아직 평가한 추천이 없습니다</p>
            </div>
        </section>
    </main>

    <!-- Auth Modal -->
    <div class="modal-overlay" id="auth-modal">
        <div class="modal glass auth-modal">
            <div class="modal-header">
                <h3 id="auth-modal-title">로그인</h3>
                <button class="modal-close" id="auth-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="auth-tabs">
                    <button class="auth-tab-btn active" data-auth-tab="login">로그인</button>
                    <button class="auth-tab-btn" data-auth-tab="signup">회원가입</button>
                </div>

                <!-- Login Form -->
                <form id="login-form" class="auth-form active">
                    <div class="form-group">
                        <label for="login-email">이메일</label>
                        <input type="email" id="login-email" class="glass-input" placeholder="이메일을 입력하세요" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">비밀번호</label>
                        <input type="password" id="login-password" class="glass-input" placeholder="비밀번호를 입력하세요"
                            required>
                    </div>
                    <p class="auth-error" id="login-error"></p>
                    <button type="submit" class="btn btn-primary btn-large">로그인</button>
                </form>

                <!-- Signup Form -->
                <form id="signup-form" class="auth-form">
                    <div class="form-group">
                        <label for="signup-email">이메일</label>
                        <input type="email" id="signup-email" class="glass-input" placeholder="이메일을 입력하세요" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-password">비밀번호</label>
                        <input type="password" id="signup-password" class="glass-input" placeholder="6자 이상 입력하세요"
                            required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="signup-password-confirm">비밀번호 확인</label>
                        <input type="password" id="signup-password-confirm" class="glass-input"
                            placeholder="비밀번호를 다시 입력하세요" required>
                    </div>
                    <p class="auth-error" id="signup-error"></p>
                    <button type="submit" class="btn btn-accent btn-large">회원가입</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal-overlay" id="edit-modal">
        <div class="modal glass">
            <div class="modal-header">
                <h3>수정하기</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="edit-input" class="glass-input">
                <input type="hidden" id="edit-type">
                <input type="hidden" id="edit-index">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-cancel">취소</button>
                <button class="btn btn-primary" id="modal-save">저장</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-icon">✓</span>
        <span class="toast-message" id="toast-message"></span>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p>로딩 중...</p>
    </div>

    <!-- Firebase SDK (compat version for file:// protocol) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="app.js"></script>
</body>

</html>